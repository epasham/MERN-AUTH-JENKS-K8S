<<<<<<< HEAD
=======
'use strict';

>>>>>>> e547b3e77583be3c8de92b6c78317e2fb285a75a
var noop = function() {};

function ensureFunction(value) {
    return typeof value === 'function' ? value : noop;
}

<<<<<<< HEAD
module.exports = function(node, options, context) {
=======
module.exports = function(node, fn, context) {
>>>>>>> e547b3e77583be3c8de92b6c78317e2fb285a75a
    function walk(node) {
        enter.call(context, node);

        switch (node.type) {
            case 'Group':
                node.terms.forEach(walk);
                break;

<<<<<<< HEAD
            case 'Multiplier':
                walk(node.term);
                break;

            case 'Type':
            case 'Property':
            case 'Keyword':
            case 'AtKeyword':
            case 'Function':
            case 'String':
            case 'Token':
            case 'Comma':
=======
            case 'Function':
            case 'Parentheses':
                walk(node.children);
                break;

            case 'Keyword':
            case 'Type':
            case 'Property':
            case 'Combinator':
            case 'Comma':
            case 'Slash':
            case 'String':
            case 'Percent':
>>>>>>> e547b3e77583be3c8de92b6c78317e2fb285a75a
                break;

            default:
                throw new Error('Unknown type: ' + node.type);
        }

        leave.call(context, node);
    }

    var enter = noop;
    var leave = noop;

<<<<<<< HEAD
    if (typeof options === 'function') {
        enter = options;
    } else if (options) {
        enter = ensureFunction(options.enter);
        leave = ensureFunction(options.leave);
=======
    if (typeof fn === 'function') {
        enter = fn;
    } else if (fn) {
        enter = ensureFunction(fn.enter);
        leave = ensureFunction(fn.leave);
>>>>>>> e547b3e77583be3c8de92b6c78317e2fb285a75a
    }

    if (enter === noop && leave === noop) {
        throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\'t a function');
    }

    walk(node, context);
};
